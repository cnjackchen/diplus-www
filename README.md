# diplus-www

在比亚迪车机安装Termux扩展车机功能，实现：
1. 远程查看和管理车机文件和视频
2. 远程查看车况数据
3. 远程发送指令控制车辆


### 前提
1. 比亚迪车机，已开ADB权限
2. 部分功能依赖于比亚迪第三方视频监控APP-迪加

### 用法
1. 在车机安装Termux并完成基本设置。

2. 将以下命令复制到Termux中运行：
```
curl -sSL https://ghfast.top/https://raw.githubusercontent.com/cnjackchen/diplus-www/refs/heads/main/scripts/install.sh -o install.sh && bash install.sh --github_proxy https://ghfast.top
```
以上命令首先下载install.sh脚本到Termux，然后运行脚本完成安装。
命令中的 `https://ghfast.top` 是github加速地址，如果失效请自行寻找有效网址并替换命令中的地址。

3. 浏览器 http://车机IP:8018 进入系统界面。

更多信息请查阅教程：[Termux扩展比亚迪车机功能](https://docs.qq.com/doc/DWHVwWE1RYVBES2Fz)


### 相关资源和项目
本系统集成了以下项目和资源，感谢相关作者的付出。
- [caddy](https://github.com/caddyserver/caddy): Fast and extensible multi-platform HTTP/1-2-3 web server with automatic HTTPS
- [lucky](https://github.com/gdy666/lucky): ipv6动态域名、自动SSL证书、FileBrowser文件浏览
- [easytier](https://github.com/EasyTier/EasyTier): 通过虚拟组网连接车机
- [frp](https://github.com/fatedier/frp): 通过反代远程连接车机
- [樱花Frp](https://www.natfrp.com): 基于frp二次开发、提供免费公共服务器的反代方案

### 更新记录

### v2.6 2025.04.18
1. 车况数据中增加可选的在首页图片四角显示胎压数据。
2. 增加在首页显示保养提醒，可设置提前发送保养提醒到微信/钉钉。
3. 任意视频全屏播放界面，鼠标在视频上悬停时显示播放上一个、下一个视频按钮。
4. 迪加记录仪、原车记录仪视频全屏播放界面在地图上同步显示车辆位置（手机浏览器播放始终显示，电脑浏览器播放鼠标悬停显示）。
5. 迪加哨兵、全景记录仪视频全屏播放界面支持单独显示前/后/左/右视角，视角可通过按钮或键盘方向键/Esc键切换和重置。

### v2.5 2025.04.14
1. 修复因时区问题导致行程列表显示日期不正确的问题。
2. 增加首页显示车辆位置和停车时长，行程、行驶轨迹显示地点。
3. 车况数据可选自动刷新。
4. 点击行驶轨迹上的点可选择查看迪加记录仪视频/原车记录仪视频。

### v2.4 2025.04.09
1. 增加历史行驶轨迹显示功能。
    车机安装迪加1.3.7b8及以上版本，在迪加小程序中添加一条自动化采集行驶轨迹，之后在日行程页面点击地图标记即可查看行驶轨迹。
    具体自动化设置详见行驶轨迹页面。
2. 点击行驶轨迹上的锚点可显示当时的车速、海拔以及行车记录仪截图等信息，点击图片可查看对应的视频。

### v2.3 2025.04.03
1. 简化车况数据异常显示设置。
2. 将首页的lucky链接移到系统设置页面中。
3. 增加行驶里程、能耗、费用统计。

### v2.2 2025.03.30
1. 修正自定义文件夹视频文件名中文乱码、无法播放的问题。
2. 首页车况数据增加自定义异常数据标识功能。

注意：显示车况数据需车机安装迪加1.3.7b6及以上版本。

### v2.1 2025.03.29
1. 更新easytier到v2.2.4(armv7)，支持填写多个组网服务器。
2. 增加浏览自定义文件夹视频的功能。
3. 增加哨兵视频异常位置标识(人/车)。
4. 增加远程控车模块：在系统设置中添加常用的远程小迪指令，指令按钮将显示在系统首页。
5. 增加在系统首页显示车况数据的功能：需在系统设置中自行添加需要显示的参数。

注意：显示车况数据需车机安装迪加1.3.7b6及以上版本。

### v2.0 2025.03.22
1. 增加查看迪加录屏视频功能。
2. 迪加哨兵报警时实时推送哨兵触发画面到微信/钉钉。
3. 推送报警信息时可选择图文混合推送（实时、小图），或者图文分开推送（实时推信息、延时推高清大图）。

注意：此版本需要配合迪加1.3.7b4以上版本，需要在迪加服务小程序中重新设置自动化执行指令（具体指令见系统设置-报警信息页面）。

### v1.5 2025.03.14
1. 如果在通用设置中将推送等待时间设置为5秒以上(建议设20秒以上)，将尝试等待视频文件生成并获取视频封面推送至微信/钉钉。按照微信、钉钉特点采用不同的方式推送视频封面。

### v1.4 2025.03.13
1. easytier改为armv7版本(兼容老款车机)。
2. 增加迪加报警信息推送到钉钉的功能, 支持推送视频封面(如需推送封面建议等待时间设为20秒以上)。

### v1.3 2025.03.08
1. 修复初次安装初始密码无法登录的问题。
2. 增加自定义系统首页图片和微信信息图片的功能。
3. 如需在Termux启动时运行自己的sh脚本，可将脚本放在~/boot文件夹中。如果脚本中含死循环需要一直在后台运行，请确保文件名格式为 *_nohup.sh。

### v1.2 2025.03.07
1. 修复苹果手机播放视频自动调节亮度无效的问题。
2. 增加视频亮度调节最大值设置，可依据自己视频亮度情况修改。
3. 增加重启系统功能。

#### v1.1 2025.03.03
1. 修复原车记录仪视频封面错乱、无法播放的问题。
2. 系统设置-通用中增加系统在线更新功能。
3. 界面修改。

#### v1.0 2025.02
第一个版本
